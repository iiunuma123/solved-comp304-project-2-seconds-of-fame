Download Link: https://assignmentchef.com/product/solved-comp304-project-2-seconds-of-fame
<br>
In this project, you will get more familiar with the concepts of scheduling, synchronisation, multithreading and deadlock prevention in operating systems by using POSIX Threads (pthreads) API.

<h1>Background</h1>

A media company would like to air some new debate programs on TV. However, they want to test the waters first, since they are not sure how their format would work. That’s why they asked an OS student to make a simulator for the program.

The program features several commentators and a single moderator. Since this is supposed to be a civil TV program, only one person can speak at a given time. This should be ensured by the moderator.

More importantly, the speakers should not get into a deadlock, since a program will not be very interesting if it features people sitting quietly.

Your task is to make a simulator which satisfies these conditions.

<h1>Part 1 (70 pts)</h1>

The program format is based on a Q&amp;A model. The moderator asks a question to start. Each commentator requests to answer to this question with probability <em>p</em>. After some of the commentators give their opinions on the subject, a new question is asked. There will be a total of <em>q </em>questions.

You decide to model the commentators and the moderator as separate threads. In order to answer

1

<em>PART 2 (20 PTS)</em>

a question, a commentator thread will post a request to a global queue. Afterwards, it waits for a ”your turn to speak” signal from the moderator and ”speaks” (read: sleeps) for <em>t<sub>speak </sub></em>seconds.

When the commentator is done speaking, they should notify the moderator. If the queue is empty and no one is interested in speaking, the moderator asks a new question and the cycle continues.

Here are more implementation details for Part 1:

<ul>

 <li>All threads are created at program start.</li>

 <li>There should be <em>N </em>commentator threads and one moderator thread. Specify <em>N </em>with a command line option -n.</li>

 <li>The moderator asks <em>q </em>questions in total. (specified by -q option)</li>

 <li>Asking a question does not require screen time.</li>

 <li>After a question is asked, each commentator thread requests to answer with probability <em>p </em>(specified by -p option). • If a request to answer is generated, the commentator thread posts a request to the global queue and waits for a signal.</li>

 <li>The moderator pops the first request in the queue and wakes up the associated commentator thread.</li>

 <li>When the commentator thread wakes up, it should speak (sleep) for <em>t<sub>speak </sub></em>seconds and notify the moderator.</li>

 <li><em>t<sub>speak </sub></em>should be a random real number between 1 and <em>t </em>(specified by -t option).</li>

 <li>Only one commentator should speak at a time.</li>

 <li>If the queue is empty and no commentator is speaking, the moderator asks a new question.</li>

 <li>The program ends when all questions are asked and all requests to answer have been processed.</li>

 <li>Join all threads before program completion.</li>

</ul>

<h1>Part 2 (20 pts)</h1>

Sometimes a breaking news event occurs during the program, such as a fire, an earthquake or an important person giving a speech. The channel owners would like you to adapt to this scenario.

Such events should be generated by the main thread. Each second, if there isn’t a breaking event, the main thread should generate a breaking event with probability <em>b</em>. Specify <em>b </em>with command line option -b.

Page 2 of 4

<em>DELIVERABLES</em>

You should have a separate thread which waits for breaking news events. This thread will log the start and the end of the breaking news event. The event always lasts 5 seconds.

In addition, when the breaking event occurs, any ”speaking” commentator thread should cut short and the moderator should stop processing requests until the event ends. The program will continue with the next speaker after the break.

<h1>Logging (10 pts)</h1>

You should print logs to stdout for demonstration and debugging purposes. Suggested logging points are when:

<ul>

 <li>the moderator asks a question</li>

 <li>a commentator creates a request to speak</li>

 <li>a commentator starts and finishes speaking</li>

 <li>a breaking event starts and ends</li>

</ul>

Add timestamps with milliseconds to your logs. You can utilize the gettimeofday function for that purpose.

The suggested format is:

…

[00:04.195] Moderator asks question 2

[00:04.195] Commentator #1 generates answer, position in queue: 0

[00:04.195] Commentator #0 generates answer, position in queue: 1

[00:04.195] Commentator #1’s turn to speak for 1.561 seconds

[00:05.756] Commentator #1 finished speaking

[00:05.756] Commentator #0’s turn to speak for 2.958 seconds [00:07.001] Breaking news!

[00:07.001] Commentator #0 is cut short due to a breaking news

[00:12.001] Breaking news ends [00:12.001] Moderator asks question 3 …